#include "strtob.h"

#include <iostream>
#include <cstring>

using namespace std;

unsigned char* strtobytes(const char* str) {
	char input_str[65] = { 0 };
	memset(input_str, '0', 64);
	memcpy(input_str+64-strlen(str), str, strlen(str));
	cout << "input: " << input_str << endl;
	unsigned char* input_key = new unsigned char[32];
	memset(input_key, 0, 32);
	for (int i=0; i<32; i++) {
		char segment[sizeof(char)*2+1] = { 0 };
		char* cursor = input_str+(i*sizeof(char)*2);
		memcpy(segment, cursor, sizeof(char)*2);
		long num = strtol(segment, NULL, 16);
		memcpy(input_key+i, &num, 1);
	}
	return input_key;
}